{"ast":null,"code":"var _jsxFileName = \"/home/prabath/Desktop/Hotel Management Sytem/src/components/storeManagerComponents/newitemform.jsx\";\nimport React, { Component } from \"react\";\nimport FormSuper from \"./common/formsuper\";\nimport Joi, { join } from \"joi-browser\";\nimport axios from \"axios\";\nimport ItemCodeTable from \"./common/itemcodestable\";\nimport SearchBox from \"./common/searchBox\";\nimport ListGroup from \"./common/listgroup\";\nimport swal from \"sweetalert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass NewItemForm extends FormSuper {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      data: {\n        Code: \"\",\n        Type: \"\",\n        Category: \"\",\n        Quantity: \"\",\n        Supplier: \"\",\n        AddedDate: \"\"\n      },\n      categories: [\"category1\", \"category2\", \"category3\"],\n      types: [{\n        _id: \"123\",\n        categoryName: \"Product\"\n      }, {\n        _id: \"143\",\n        categoryName: \"Material\"\n      }],\n      iCodes: [],\n      genres: [\"All\", \"Product\", \"Material\"],\n      searchQuery: \"\",\n      errors: {},\n      selectedGenre: \"All\",\n      materialCodeObjects: [],\n      categoryObjects: []\n    };\n    this.schema = {\n      Code: Joi.string().required(),\n      Type: Joi.string().required(),\n      Category: Joi.string().required(),\n      Quantity: Joi.number().required(),\n      Supplier: Joi.string().required(),\n      AddedDate: Joi.date().required()\n    };\n\n    this.handleGenreSelect = g => {\n      this.setState({\n        selectedGenre: g,\n        searchQuery: \"\"\n      });\n    };\n\n    this.handleSearch = query => {\n      this.setState({\n        searchQuery: query,\n        selectedGenre: \"All\"\n      });\n    };\n  }\n\n  componentDidMount() {\n    //take the category set from db\n    //take the Material codes from db\n    axios.get(\"http://localhost:5000/codes/material/\").then(result => {\n      const materialCodesObjs = result.data;\n      console.log(materialCodesObjs);\n      axios.get(\"http://localhost:5000/category/\").then(result => {\n        const categoryObjs = result.data;\n        console.log(categoryObjs); //this.setState({categoryObjects: categoryObjs});\n\n        this.setState({\n          materialCodeObjects: materialCodesObjs,\n          categoryObjects: categoryObjs\n        });\n      });\n    }); //take the Product codes from db\n    //and put them into single array name iCodes after put them into codes table after set search and fiter them and put again\n  }\n\n  filteredData() {\n    const {\n      searchQuery,\n      materialCodeObjects,\n      selectedGenre\n    } = this.state;\n    let filtered = [];\n\n    if (searchQuery) {\n      filtered = materialCodeObjects.filter(m => m.materialName.toLowerCase().startsWith(searchQuery.toLowerCase()));\n    } else if (selectedGenre === \"All\") {\n      filtered = materialCodeObjects;\n    } else if (selectedGenre === \"Material\") {\n      filtered = materialCodeObjects;\n    } else {\n      filtered = [];\n    } //finish it\n\n\n    return filtered;\n  }\n\n  doSubmit() {\n    // console.log(\"submitted\", this.state.data);\n    const jsonOb = this.state.data;\n    axios.post(\"http://localhost:5000/items/add/record\", jsonOb).then(result => console.log(result.data));\n    axios.post(\"http://localhost:5000/items/add\", jsonOb).then(result => console.log(result.data)); //this.props.history.push(\"/items\");\n\n    window.location = \"/items\";\n  }\n\n  render() {\n    const filtered = this.filteredData();\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"New Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.handleSubmit,\n            children: [this.renderInput(\"Code\", \"Item Code\"), this.renderSelect(\"Type\", \"Item Type\", this.state.types), this.renderSelect(\"Category\", \"Category\", this.state.categoryObjects), this.renderInput(\"Quantity\", \"Item Quantity\"), this.renderInput(\"Supplier\", \"Supplier Name\"), this.renderInput(\"AddedDate\", \"Received date\", \"date\"), this.renderButton(\"Add Item\")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: /*#__PURE__*/_jsxDEV(ListGroup, {\n                genres: this.state.genres,\n                onGenreSelect: this.handleGenreSelect,\n                selectedGenre: this.state.selectedGenre\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: /*#__PURE__*/_jsxDEV(SearchBox, {\n                onChange: this.handleSearch,\n                value: this.state.searchQuery,\n                placeHolder: \"Search codes...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ItemCodeTable, {\n            materialCodeObs: filtered\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default NewItemForm;","map":{"version":3,"names":["React","Component","FormSuper","Joi","join","axios","ItemCodeTable","SearchBox","ListGroup","swal","NewItemForm","state","data","Code","Type","Category","Quantity","Supplier","AddedDate","categories","types","_id","categoryName","iCodes","genres","searchQuery","errors","selectedGenre","materialCodeObjects","categoryObjects","schema","string","required","number","date","handleGenreSelect","g","setState","handleSearch","query","componentDidMount","get","then","result","materialCodesObjs","console","log","categoryObjs","filteredData","filtered","filter","m","materialName","toLowerCase","startsWith","doSubmit","jsonOb","post","window","location","render","handleSubmit","renderInput","renderSelect","renderButton"],"sources":["/home/prabath/Desktop/Hotel Management Sytem/src/components/storeManagerComponents/newitemform.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport FormSuper from \"./common/formsuper\";\nimport Joi, { join } from \"joi-browser\";\nimport axios from \"axios\";\nimport ItemCodeTable from \"./common/itemcodestable\";\nimport SearchBox from \"./common/searchBox\";\nimport ListGroup from \"./common/listgroup\";\nimport swal from \"sweetalert\";\n\nclass NewItemForm extends FormSuper {\n  state = {\n    data: {\n      Code: \"\",\n      Type: \"\",\n      Category: \"\",\n      Quantity: \"\",\n      Supplier: \"\",\n      AddedDate: \"\",\n    },\n    categories: [\"category1\", \"category2\", \"category3\"],\n    types: [\n      { _id: \"123\", categoryName: \"Product\" },\n      { _id: \"143\", categoryName: \"Material\" },\n    ],\n    iCodes: [],\n    genres: [\"All\", \"Product\", \"Material\"],\n    searchQuery: \"\",\n    errors: {},\n    selectedGenre: \"All\",\n    materialCodeObjects: [],\n    categoryObjects: [],\n  };\n\n  schema = {\n    Code: Joi.string().required(),\n    Type: Joi.string().required(),\n    Category: Joi.string().required(),\n    Quantity: Joi.number().required(),\n    Supplier: Joi.string().required(),\n    AddedDate: Joi.date().required(),\n  };\n\n  componentDidMount() {\n    //take the category set from db\n    //take the Material codes from db\n    axios.get(\"http://localhost:5000/codes/material/\").then((result) => {\n      const materialCodesObjs = result.data;\n      console.log(materialCodesObjs);\n      axios.get(\"http://localhost:5000/category/\").then((result) => {\n        const categoryObjs = result.data;\n        console.log(categoryObjs);\n        //this.setState({categoryObjects: categoryObjs});\n        this.setState({\n          materialCodeObjects: materialCodesObjs,\n          categoryObjects: categoryObjs,\n        });\n      });\n    });\n\n    //take the Product codes from db\n    //and put them into single array name iCodes after put them into codes table after set search and fiter them and put again\n  }\n\n  handleGenreSelect = (g) => {\n    this.setState({ selectedGenre: g, searchQuery: \"\" });\n  };\n\n  handleSearch = (query) => {\n    this.setState({\n      searchQuery: query,\n      selectedGenre: \"All\",\n    });\n  };\n\n  filteredData() {\n    const { searchQuery, materialCodeObjects, selectedGenre } = this.state;\n\n    let filtered = [];\n    if (searchQuery) {\n      filtered = materialCodeObjects.filter((m) =>\n        m.materialName.toLowerCase().startsWith(searchQuery.toLowerCase())\n      );\n    } else if (selectedGenre === \"All\") {\n      filtered = materialCodeObjects;\n    } else if (selectedGenre === \"Material\") {\n      filtered = materialCodeObjects;\n    } else {\n      filtered = [];\n    }\n    //finish it\n    return filtered;\n  }\n\n  doSubmit() {\n    // console.log(\"submitted\", this.state.data);\n    const jsonOb = this.state.data;\n\n    axios\n      .post(\"http://localhost:5000/items/add/record\", jsonOb)\n      .then((result) => console.log(result.data));\n    axios\n      .post(\"http://localhost:5000/items/add\", jsonOb)\n      .then((result) => console.log(result.data));\n\n    //this.props.history.push(\"/items\");\n    window.location = \"/items\";\n  }\n\n  render() {\n    const filtered = this.filteredData();\n    return (\n      <React.Fragment>\n        <div className=\"row\">\n          <div className=\"col-2\"></div>\n          <div className=\"col\">\n            <h1>New Item</h1>\n            <form onSubmit={this.handleSubmit}>\n              {this.renderInput(\"Code\", \"Item Code\")}\n              {this.renderSelect(\"Type\", \"Item Type\", this.state.types)}\n              {this.renderSelect(\n                \"Category\",\n                \"Category\",\n                this.state.categoryObjects\n              )}\n              {this.renderInput(\"Quantity\", \"Item Quantity\")}\n              {this.renderInput(\"Supplier\", \"Supplier Name\")}\n              {this.renderInput(\"AddedDate\", \"Received date\", \"date\")}\n              {this.renderButton(\"Add Item\")}\n            </form>\n          </div>\n\n          <div className=\"col\">\n            <div className=\"row\">\n              <div className=\"col\">\n                <ListGroup\n                  genres={this.state.genres}\n                  onGenreSelect={this.handleGenreSelect}\n                  selectedGenre={this.state.selectedGenre}\n                />\n              </div>\n              <div className=\"col\">\n                <SearchBox\n                  onChange={this.handleSearch}\n                  value={this.state.searchQuery}\n                  placeHolder=\"Search codes...\"\n                />\n              </div>\n            </div>\n\n            <ItemCodeTable materialCodeObs={filtered} />\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default NewItemForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}