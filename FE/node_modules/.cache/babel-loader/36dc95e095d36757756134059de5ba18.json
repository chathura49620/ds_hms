{"ast":null,"code":"var _jsxFileName = \"C:\\\\ds_hms\\\\FE\\\\src\\\\components\\\\Traveller\\\\reusables\\\\formsuper.jsx\";\nimport React, { Component } from \"react\";\nimport Joi from \"joi-browser\";\nimport Input from \"./input\";\nimport Select from \"./select\";\nimport TextArea from \"./textarea\";\nimport Radio from \"./radio\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass FormSuper extends Component {\n  constructor() {\n    super(...arguments);\n\n    this.handleChange = _ref => {\n      let {\n        currentTarget\n      } = _ref;\n      const errors = { ...this.state.errors\n      };\n      const errorMessage = this.validateProperty(currentTarget);\n      if (errorMessage) errors[currentTarget.name] = errorMessage;else delete errors[currentTarget.name];\n      const data = { ...this.state.data\n      };\n      data[currentTarget.name] = currentTarget.value;\n      this.setState({\n        data: data,\n        errors: errors\n      });\n    };\n\n    this.validateProperty = input => {\n      const obj = {\n        [input.name]: input.value\n      };\n      const schema = {\n        [input.name]: this.schema[input.name]\n      };\n      const {\n        error\n      } = Joi.validate(obj, schema);\n      return error ? error.details[0].message : null;\n    };\n\n    this.validate = () => {\n      const result = Joi.validate(this.state.data, this.schema, {\n        abortEarly: false\n      });\n      console.log(result);\n      if (!result.error) return null;\n      const errors = {};\n\n      for (let item of result.error.details) {\n        errors[item.path[0]] = item.message;\n      }\n\n      return errors;\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const errors = this.validate();\n      console.log(errors);\n      this.setState({\n        errors: errors || {}\n      });\n      if (errors) return;\n      this.doSubmit();\n    };\n  }\n\n  renderButton(label) {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-sm btn-primary my-2\",\n      type: \"submit\",\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this);\n  }\n\n  renderInput(name, label) {\n    let type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"text\";\n    return /*#__PURE__*/_jsxDEV(Input, {\n      type: type,\n      name: name,\n      label: label,\n      value: this.state.data[name],\n      onChange: this.handleChange,\n      error: this.state.errors[name]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this);\n  }\n\n  renderTextArea(name, label) {\n    return /*#__PURE__*/_jsxDEV(TextArea, {\n      name: name,\n      label: label,\n      value: this.state.data[name],\n      onChange: this.handleChange,\n      error: this.state.errors[name]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this);\n  }\n\n  renderSelect(name, label, options) {\n    const {\n      data\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Select, {\n      name: name,\n      value: data[name],\n      label: label,\n      options: options,\n      onChange: this.handleChange,\n      error: this.state.errors[name]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default FormSuper;","map":{"version":3,"names":["React","Component","Joi","Input","Select","TextArea","Radio","FormSuper","handleChange","currentTarget","errors","state","errorMessage","validateProperty","name","data","value","setState","input","obj","schema","error","validate","details","message","result","abortEarly","console","log","item","path","handleSubmit","e","preventDefault","doSubmit","renderButton","label","renderInput","type","renderTextArea","renderSelect","options"],"sources":["C:/ds_hms/FE/src/components/Traveller/reusables/formsuper.jsx"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport Joi from \"joi-browser\";\r\nimport Input from \"./input\";\r\nimport Select from \"./select\";\r\nimport TextArea from \"./textarea\";\r\nimport Radio from \"./radio\";\r\n\r\nclass FormSuper extends Component {\r\n\r\n\r\n  handleChange = ({ currentTarget }) => {\r\n     const errors = { ...this.state.errors };\r\n\r\n    const errorMessage = this.validateProperty(currentTarget);\r\n\r\n    if (errorMessage) errors[currentTarget.name] = errorMessage;\r\n    else delete errors[currentTarget.name];\r\n    const data = { ...this.state.data };\r\n    \r\n    data[currentTarget.name] = currentTarget.value;\r\n    this.setState({ data: data, errors: errors });\r\n    \r\n\r\n  };\r\n\r\n  validateProperty = (input) => {\r\n    const obj = { [input.name]: input.value };\r\n    const schema = { [input.name]: this.schema[input.name] };\r\n    const { error } = Joi.validate(obj, schema);\r\n    return error ? error.details[0].message : null;\r\n  };\r\n\r\n  validate = () => {\r\n    const result = Joi.validate(this.state.data, this.schema, {\r\n      abortEarly: false,\r\n    });\r\n    console.log(result);\r\n    if (!result.error) return null;\r\n\r\n    const errors = {};\r\n    for (let item of result.error.details) {\r\n      errors[item.path[0]] = item.message;\r\n    }\r\n    return errors;\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const errors = this.validate();\r\n    console.log(errors);\r\n    this.setState({ errors: errors || {} });\r\n\r\n    if (errors) return;\r\n\r\n    this.doSubmit();\r\n  };\r\n\r\n  renderButton(label) {\r\n    return (\r\n      <button\r\n        className=\"btn btn-sm btn-primary my-2\"\r\n        type=\"submit\"\r\n      >\r\n        {label}\r\n      </button>\r\n    );\r\n  }\r\n\r\n  renderInput(name, label, type = \"text\") {\r\n    return (\r\n      <Input\r\n      type={type}\r\n      name={name}\r\n      label={label}\r\n      value={this.state.data[name]}\r\n      onChange={this.handleChange}\r\n      error={this.state.errors[name]}\r\n      />\r\n      \r\n    );\r\n  }\r\n\r\n  renderTextArea(name, label) {\r\n    return (\r\n      <TextArea\r\n        name={name}\r\n        label={label}\r\n        value={this.state.data[name]}\r\n        onChange={this.handleChange}\r\n        error={this.state.errors[name]}\r\n      />\r\n    );\r\n  }\r\n\r\n  renderSelect(name, label, options) {\r\n    const { data } = this.state;\r\n\r\n    return (\r\n      <Select\r\n        name={name}\r\n        value={data[name]}\r\n        label={label}\r\n        options={options}\r\n        onChange={this.handleChange}\r\n        error={this.state.errors[name]}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default FormSuper;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}