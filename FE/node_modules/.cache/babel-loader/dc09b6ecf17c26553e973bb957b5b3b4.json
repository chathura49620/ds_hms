{"ast":null,"code":"var _jsxFileName = \"/home/prabath/Desktop/Hotel Management Sytem/src/components/storeManagerComponents/common/formsuper.jsx\";\nimport React, { Component } from \"react\";\nimport Joi from \"joi-browser\";\nimport Input from \"./input\";\nimport Select from \"./select\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass FormSuper extends Component {\n  constructor() {\n    super(...arguments);\n\n    this.handleChange = _ref => {\n      let {\n        currentTarget\n      } = _ref;\n      const errors = { ...this.state.errors\n      };\n      const errorMessage = this.validateProperty(currentTarget);\n      if (errorMessage) errors[currentTarget.name] = errorMessage;else delete errors[currentTarget.name];\n      const data = { ...this.state.data\n      };\n      data[currentTarget.name] = currentTarget.value;\n      this.setState({\n        data: data,\n        errors: errors\n      });\n    };\n\n    this.validateProperty = input => {\n      const obj = {\n        [input.name]: input.value\n      };\n      const schema = {\n        [input.name]: this.schema[input.name]\n      };\n      const {\n        error\n      } = Joi.validate(obj, schema);\n      return error ? error.details[0].message : null;\n    };\n\n    this.validate = () => {\n      const result = Joi.validate(this.state.data, this.schema, {\n        abortEarly: false\n      });\n      console.log(result);\n      if (!result.error) return null;\n      const errors = {};\n\n      for (let item of result.error.details) {\n        errors[item.path[0]] = item.message;\n      }\n\n      return errors;\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const errors = this.validate();\n      console.log(errors);\n      this.setState({\n        errors: errors || {}\n      });\n      if (errors) return;\n      this.doSubmit();\n    };\n  }\n\n  renderButton(label) {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn my-2\",\n      style: {\n        backgroundColor: \"#7121AD\",\n        color: \"white\"\n      },\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this);\n  }\n\n  renderInput(name, label) {\n    let type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"text\";\n    return /*#__PURE__*/_jsxDEV(Input, {\n      type: type,\n      name: name,\n      label: label,\n      value: this.state.data[name],\n      onChange: this.handleChange,\n      error: this.state.errors[name]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this);\n  }\n\n  renderSelect(name, label, options) {\n    const {\n      data\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Select, {\n      name: name,\n      value: data[name],\n      label: label,\n      options: options,\n      onChange: this.handleChange,\n      error: this.state.errors[name]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default FormSuper;","map":{"version":3,"names":["React","Component","Joi","Input","Select","FormSuper","handleChange","currentTarget","errors","state","errorMessage","validateProperty","name","data","value","setState","input","obj","schema","error","validate","details","message","result","abortEarly","console","log","item","path","handleSubmit","e","preventDefault","doSubmit","renderButton","label","backgroundColor","color","renderInput","type","renderSelect","options"],"sources":["/home/prabath/Desktop/Hotel Management Sytem/src/components/storeManagerComponents/common/formsuper.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport Joi from \"joi-browser\";\nimport Input from \"./input\";\nimport Select from \"./select\";\n\nclass FormSuper extends Component {\n  handleChange = ({ currentTarget }) => {\n    const errors = { ...this.state.errors };\n\n    const errorMessage = this.validateProperty(currentTarget);\n\n    if (errorMessage) errors[currentTarget.name] = errorMessage;\n    else delete errors[currentTarget.name];\n\n    const data = { ...this.state.data };\n    data[currentTarget.name] = currentTarget.value;\n    this.setState({ data: data, errors: errors });\n  };\n\n  validateProperty = (input) => {\n    const obj = { [input.name]: input.value };\n    const schema = { [input.name]: this.schema[input.name] };\n    const { error } = Joi.validate(obj, schema);\n    return error ? error.details[0].message : null;\n  };\n\n  validate = () => {\n    const result = Joi.validate(this.state.data, this.schema, {\n      abortEarly: false,\n    });\n    console.log(result);\n    if (!result.error) return null;\n\n    const errors = {};\n    for (let item of result.error.details) {\n      errors[item.path[0]] = item.message;\n    }\n    return errors;\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const errors = this.validate();\n    console.log(errors);\n    this.setState({ errors: errors || {} });\n\n    if (errors) return;\n\n    this.doSubmit();\n  };\n\n  renderButton(label) {\n    return (\n      <button\n        className=\"btn my-2\"\n        style={{ backgroundColor: \"#7121AD\", color: \"white\" }}\n      >\n        {label}\n      </button>\n    );\n  }\n\n  renderInput(name, label, type = \"text\") {\n    return (\n      <Input\n        type={type}\n        name={name}\n        label={label}\n        value={this.state.data[name]}\n        onChange={this.handleChange}\n        error={this.state.errors[name]}\n      />\n    );\n  }\n\n  renderSelect(name, label, options) {\n    const { data } = this.state;\n\n    return (\n      <Select\n        name={name}\n        value={data[name]}\n        label={label}\n        options={options}\n        onChange={this.handleChange}\n        error={this.state.errors[name]}\n      />\n    );\n  }\n}\n\nexport default FormSuper;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}